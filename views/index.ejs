<!DOCTYPE HTML>
<html>

<head>

    <meta charset=utf-8>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <link rel="stylesheet" href="/styles/index.css" />
    <link rel="stylesheet" href="/bootstrap/css/mdb.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="/scripts/index.js"></script>
    <script src="/bootstrap/js/mdb.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <div id="fb-root"></div>

    <script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v20.0&appId=417605231226749"
        nonce="jErlXmO4"></script>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <meta name="google-signin-client_id"
        content="142386812768-5dfql3hsf32etn4tpdpa7lo9dol09j4q.apps.googleusercontent.com">


</head>

<body>


    <!-- Nav bar -->
    <div class="nav-bar py-1 bg-white border-bottom">
        <div class="container d-flex justify-content-center align-items-center text-center">

            <!-- Left elements -->
            <div class="col text-start">
                <% if (session && session.email) { %>
                    <!-- sign out button -->
                    <form id="signoutForm" action="/signout" method="POST">
                        <button type="submit" id="signoutBtn" class="border rounded nav-link d-inline-block">
                            <p class="btn mb-0">Sign out</p>
                        </button>
                    </form>

                    <% } else { %>
                        <!-- sign in button -->
                        <a href="/login" class="menu-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"
                                class="bi bi-box-arrow-in-right" viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M6 3.5a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 0-1 0v2A1.5 1.5 0 0 0 6.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-8A1.5 1.5 0 0 0 5 3.5v2a.5.5 0 0 0 1 0z" />
                                <path fill-rule="evenodd"
                                    d="M11.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H1.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708z" />
                            </svg>
                        </a>
                        <% } %>
            </div>


            <!-- Centered title -->
            <div class="col" id="page_title" style="cursor: pointer;">
                <h1>Ruthy Michaels</h1>
            </div>


            <!-- Right elements -->
            <div class="col text-end">

                <a href="/account" class="m-2 menu-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="bi bi-person"
                        viewBox="0 0 16 16">
                        <path
                            d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z" />
                    </svg>
                </a>

                <a href="/wishlist" class="m-2 menu-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="bi bi-suit-heart"
                        viewBox="0 0 16 16">
                        <path
                            d="m8 6.236-.894-1.789c-.222-.443-.607-1.08-1.152-1.595C5.418 2.345 4.776 2 4 2 2.324 2 1 3.326 1 4.92c0 1.211.554 2.066 1.868 3.37.337.334.721.695 1.146 1.093C5.122 10.423 6.5 11.717 8 13.447c1.5-1.73 2.878-3.024 3.986-4.064.425-.398.81-.76 1.146-1.093C14.446 6.986 15 6.131 15 4.92 15 3.326 13.676 2 12 2c-.777 0-1.418.345-1.954.852-.545.515-.93 1.152-1.152 1.595zm.392 8.292a.513.513 0 0 1-.784 0c-1.601-1.902-3.05-3.262-4.243-4.381C1.3 8.208 0 6.989 0 4.92 0 2.755 1.79 1 4 1c1.6 0 2.719 1.05 3.404 2.008.26.365.458.716.596.992a7.6 7.6 0 0 1 .596-.992C9.281 2.049 10.4 1 12 1c2.21 0 4 1.755 4 3.92 0 2.069-1.3 3.288-3.365 5.227-1.193 1.12-2.642 2.48-4.243 4.38z" />
                    </svg>
                </a>


                <a href="/basket" class="m-2 menu-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" class="bi bi-cart4 menu-item"
                        viewBox="0 0 16 16">
                        <path
                            d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0" />
                    </svg>

                </a>


            </div>

        </div>
    </div>
    <!-- END nav bar -->


    <% if (session && (session.login || session.createAccount)) { %>
        <div id="overlay"></div>
        <% } %>

            <% if (session && session.login) { %>
                <div class="col-lg form-container border rounded justify-content-center align-items-center text-center">
                    <h2 class="text-center mt-2 mb-3">login</h2>

                    <% if (session.message) { %>
                        <label class="error-label">password or email incorrect</label>
                        <% } else { %>
                            <label class="error-label" hidden></label>
                            <% } %>


                                <!-- login form -->
                                <form id="login-form" class="container" style="width: 90%;" action="/login"
                                    method="POST">

                                    <!-- Email input -->
                                    <div class="form-outline mb-4" style="text-align: left;">
                                        <input type="email" class="form-control border" id="email_login" name="email"
                                            required />
                                        <label class="form-label" for="email_login">Email address</label>
                                        <label class='error-label' for='email_login' id='emailError_login' hidden>email
                                            invalid</label>
                                    </div>

                                    <!-- Password input -->
                                    <div class="form-outline mb-4" style="text-align: left;">
                                        <input type="password" class="form-control border" id="password_login"
                                            name="password" required />
                                        <label class="form-label" for="password_login">Password</label>
                                        <label class='error-label' for='password_login' id='passwordError_login'
                                            hidden>password
                                            must be 6 characters with 1 uppercase</label>
                                    </div>

                                    <!-- show password checkbox -->
                                    <div class="row mb-4">
                                        <div class="col d-flex justify-content-center">
                                            <div class="form-check">
                                                <input class="form-check-input" id="show" type="checkbox"
                                                    onclick="togglePassword()" />
                                                <label for="show">show password</label>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Submit button -->
                                    <button type="SUBMIT" class="btn btn-primary btn-block mb-4">Sign in</button>

                                    <p>or continue with</p>

                                    <!-- Or Login with Facebook and Google buttons -->
                                    <div class="m-3">

                                        <!-- FB login button -->
                                        <div class="d-flex justify-content-center">
                                            <div id="FBlogin" class="loginBtn m-2">
                                                Login with Facebook
                                            </div>
                                        </div>

                                        <!-- Google login button -->
                                        <div class="d-flex justify-content-center">

                                            <div id="g_id_onload"
                                                data-client_id="142386812768-5dfql3hsf32etn4tpdpa7lo9dol09j4q.apps.googleusercontent.com"
                                                data-context="signin" data-ux_mode="popup"
                                                data-callback="handleCredentialResponse" data-auto_prompt="false">
                                            </div>

                                            <div class="g_id_signin" data-type="standard"></div>
                                        </div>

                                        <div id="status"></div>

                                    </div>

                                    <!-- Log in button -->
                                    <div class="text-center">
                                        <p>Don't have an account? <a href="/createAccount">Sign up</a></p>
                                    </div>

                                </form>

                </div>
                <% } %>

                    <% if (session && session.createAccount) { %>
                        <div
                            class="col-lg form-container border rounded justify-content-center align-items-center text-center">
                            <h2 class="text-center mt-2 mb-3">Create account</h2>

                            <% if (session.message) { %>
                                <label class="error-label">User already exists</label>
                                <% } else { %>
                                    <label class="error-label" hidden></label>
                                    <% } %>

                                        <!-- login form -->
                                        <form id="createAccount-form" class="container" style="width: 90%;"
                                            action="/createAccount" method="POST">

                                            <!-- Email input -->
                                            <div class="form-outline mb-4">
                                                <input type="email" class="form-control border" id="email_signup"
                                                    name="email" required />
                                                <label class="form-label" for="email_signup">Email address</label>
                                                <label class='error-label' for='email_signup' id='emailError_signup'
                                                    hidden>Email invalid</label>
                                            </div>

                                            <!-- Password input -->
                                            <div class="form-outline mb-4">
                                                <input type="password" class="form-control border" id="password_signup"
                                                    name="password" required />
                                                <label class="form-label" for="password_signup">Password</label>
                                                <label class='error-label' for='password_signup'
                                                    id='passwordError_signup' hidden>
                                                    password must
                                                    be 6
                                                    characters with 1 uppercase</label>
                                            </div>

                                            <!-- Confirm password input -->
                                            <div class="form-outline mb-4">
                                                <input type="password" class="form-control border"
                                                    id="confPassword_signup" name="confPassword" required />
                                                <label class="form-label" for="confPassword_signup">Confirm
                                                    password</label>
                                                <label class='error-label' for='confPassword_signup'
                                                    id='confPasswordError_signup' hidden>
                                                    passwords must
                                                    match</label>
                                            </div>

                                            <!-- show password checkbox -->
                                            <div class="row mb-4">
                                                <div class="col d-flex justify-content-center">
                                                    <div class="form-check">
                                                        <input class="form-check-input" id="show" type="checkbox"
                                                            onclick="togglePassword()" />
                                                        <label for="show">show password</label>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Submit button -->
                                            <button type="SUBMIT" class="btn btn-primary btn-block mb-4">Sign
                                                up</button>

                                            <p>or continue with</p>

                                            <!-- Or Login with Facebook and Google buttons -->
                                            <div class="m-3">

                                                <!-- FB login button -->
                                                <div class="d-flex justify-content-center">
                                                    <div id="FBlogin" class="loginBtn m-2">
                                                        Login with Facebook
                                                    </div>
                                                </div>

                                                <!-- Google login button -->
                                                <div class="d-flex justify-content-center">

                                                    <div id="g_id_onload"
                                                        data-client_id="142386812768-5dfql3hsf32etn4tpdpa7lo9dol09j4q.apps.googleusercontent.com"
                                                        data-context="signin" data-ux_mode="popup"
                                                        data-callback="handleCredentialResponse"
                                                        data-auto_prompt="false">
                                                    </div>

                                                    <div class="g_id_signin" data-type="standard"></div>
                                                </div>

                                                <div id="status"></div>

                                            </div>


                                            <!-- Log in button -->
                                            <div class="text-center">
                                                <p>Already have an account? <a href="/login">Sign in</a></p>
                                            </div>
                                        </form>

                        </div>
                        <% } %>

</body>


<footer>

    <script>



    </script>

</footer>

</html>